(this.webpackJsonpbuz=this.webpackJsonpbuz||[]).push([[0],{48:function(e,t,n){},54:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var c=n(3),a=n(1),r=n.n(a),s=n(19),o=n.n(s),i=(n(48),n(26)),l=n.n(i),u=n(35),d=n(18),j=n(83),b=n(84),h=n(60),p=n(89),O=function(e){var t=e.onClick,n=void 0===t?null:t,a=e.children,r=void 0===a?null:a;return Object(c.jsx)(p.a,{onClick:n,variant:"contained",color:"primary",children:r})},m=n(30),x=n(16),g=n(88),f=n(85),v=n(86),y=n(87),C=n(90),N=n(31),S=n(29),w=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),backgroundColor:"transparent",color:e.palette.text.secondary},avatar:{backgroundColor:S.a[500]}}})),k=function(e){var t=e.createdAt,n=void 0===t?null:t,a=e.text,r=void 0===a?"":a,s=e.displayName,o=void 0===s?"":s,i=e.photoURL,l=void 0===i?"":i,u=e.color,d=void 0===u?"":u,j=w();return Object(c.jsx)("div",{className:j.root,children:Object(c.jsx)(b.a,{container:!0,spacing:1,justify:"center",children:Object(c.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(c.jsx)(h.a,{className:j.paper,children:Object(c.jsxs)(f.a,{className:j.root,style:{backgroundColor:d},children:[Object(c.jsx)(v.a,{avatar:Object(c.jsx)(C.a,{"aria-label":"recipe",className:j.avatar,children:l?Object(c.jsx)("img",{src:l,alt:"Avatar",width:45,height:45}):"A"}),title:o?Object(c.jsx)("p",{children:o}):null,subheader:(null===n||void 0===n?void 0:n.seconds)?Object(c.jsx)("span",{children:Object(g.a)(new Date(1e3*n.seconds),new Date)}):null}),Object(c.jsx)(y.a,{children:Object(c.jsx)(N.a,{variant:"body2",color:"textSecondary",component:"p",children:r})})]})})})})})},A=Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),backgroundColor:"transparent",color:e.palette.text.secondary}}}));var B=function(e){var t=e.user,n=e.db,r=Object(a.useState)([]),s=Object(d.a)(r,2),o=s[0],i=s[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),j=u[0],p=u[1],O=Object(a.useState)(""),g=Object(d.a)(O,2),f=g[0],v=g[1],y=t.uid,C=t.displayName,N=t.photoURL;Object(a.useEffect)((function(){var e=document.querySelector("#messageBody");if(e.scrollTop=e.scrollHeight-e.clientHeight,n)return n.collection("messages").orderBy("createdAt").limit(100).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id})}));i(t),console.log("*",o)}))}),[n]);var S=A();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"messageScroller",id:"messageBody",children:o.map((function(e){return Object(c.jsxs)("div",{children:[" ",Object(c.jsx)(k,Object(m.a)({},e))]},e.id)}))}),Object(c.jsx)(b.a,{container:!0,spacing:1,justify:"center",children:Object(c.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(c.jsx)(h.a,{className:S.paper,children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();[{color:"red"},{color:"green"},{color:"blue"},{color:"yellow"}].map((function(e){return v(e)})),n&&n.collection("messages").add({text:j,createdAt:x.a.firestore.FieldValue.serverTimestamp(),uid:y,displayName:C,photoURL:N,color:f})},className:"formContainer",children:[Object(c.jsx)("input",{className:"inputField",type:"text",name:"message",value:j,onChange:function(e){p(e.target.value)},placeholder:"Enter you messages"}),Object(c.jsxs)("button",{className:"sendButton",type:"submit",disabled:!j,children:[" ","Sent"]})]})})})})]})},I=(n(54),n(55),n(59),Object(j.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),color:"blue",textAlign:"center",height:"100vh"}}})));x.a.initializeApp({apiKey:"AIzaSyB9Zh-j_0ORyoLTKTm5CmmAdsEl698tvJg",authDomain:"buzchat-bcf23.firebaseapp.com",projectId:"buzchat-bcf23",storageBucket:"buzchat-bcf23.appspot.com",messagingSenderId:"640695160081",appId:"1:640695160081:web:978c7655b323ab0a0590b0",measurementId:"G-YDMVJ48QEC"});var z=x.a.auth(),F=x.a.firestore();var L=function(){var e=I(),t=Object(a.useState)((function(){return z.currentUser})),n=Object(d.a)(t,2),r=n[0],s=n[1],o=Object(a.useState)(!0),i=Object(d.a)(o,2),j=i[0],p=i[1];Object(a.useEffect)((function(){return z.onAuthStateChanged((function(e){s(e||null),j&&p(!1)}))}),[]);var m=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new x.a.auth.GoogleAuthProvider,z.useDeviceLanguage(),e.prev=2,e.next=5,z.signInWithPopup(t);case 5:console.log("hi"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.auth().signOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return j?Object(c.jsx)("p",{style:{color:"white",textAlign:"center"},children:"Loading chat.."}):Object(c.jsx)("div",{style:{color:"black"},children:r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"navbar",children:Object(c.jsxs)("ul",{children:[Object(c.jsxs)("li",{children:[" ",Object(c.jsx)("h2",{children:"BuzzChat"})]}),Object(c.jsx)("li",{className:"signOut",children:Object(c.jsx)(O,{onClick:g,children:" Sign out "})})]})}),Object(c.jsx)("br",{}),Object(c.jsx)(B,{user:r,db:F})]}):Object(c.jsx)(b.a,{container:!0,spacing:1,justify:"center",children:Object(c.jsx)(b.a,{item:!0,xs:11,sm:6,children:Object(c.jsx)(h.a,{className:e.paper,children:Object(c.jsxs)("div",{className:"signInButton",children:[Object(c.jsx)("h1",{className:"signInHeader",children:"Welcome to BuzChat"}),Object(c.jsxs)(O,{className:"signInButton",onClick:m,children:[" ","Sign in with google"," "]})]})})})})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,92)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(L,{})}),document.getElementById("root")),D()}},[[58,1,2]]]);
//# sourceMappingURL=main.e67cf0b1.chunk.js.map